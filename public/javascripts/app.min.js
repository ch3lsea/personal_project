/*! Personal_Project 2015-07-06 */
var app=angular.module("app",["ngRoute","ngResource","appControllers","ui.bootstrap"]),appControllers=angular.module("appControllers",[]);app.config(["$routeProvider","$httpProvider","$locationProvider",function(a,b){b.interceptors.push(["$q","$location",function(a,b){return{response:function(a){return a},responseError:function(c){return 401===c.status&&b.url("/login"),a.reject(c)}}}]),a.when("/home",{templateUrl:"/views/routes/home.html"}).when("/blog",{templateUrl:"/views/routes/blog.html",controller:"BlogController"}).when("/code",{templateUrl:"/views/routes/code.html",controller:"AccordionCtrl"}).when("/blogPost",{templateUrl:"/private/views/routes/blogPost.html"}).when("/login",{templateUrl:"/views/routes/login.html",controller:"LoginCtrl"}).otherwise({redirectTo:"/home"})}]),app.run(["$rootScope","$http",function(a,b){a.checkAuth=function(){b.get("/login/loggedin").success(function(b,c,d,e){"0"!==b?(console.log("Authenticated"),a.loggedin=!0):(console.log("Not Authenticated"),a.loggedin=!1)}).error(function(a,b,c,d){console.log(a,b)})},a.logout=function(){return a.message="Logged out.",b.post("/login/logout"),a.checkAuth()}}]),app.controller("BlogController",["$scope","$http",function(a,b){a.bPost={},a.posts=[];var c=function(){return b.get("/posts").then(function(b){if(200!==b.status)throw new Error("Failed to fetch posts from the API");return a.bPost={},a.posts=b.data,b.data})};c(),a.add=function(d){return a.bPost.title&&a.bPost.content?b.post("/posts",d).then(c()):void alert("You missed a section there")},a["delete"]=function(a){return b["delete"]("/posts/"+a).then(c())},a.status={isOpen:!0}}]),app.controller("AccordionCtrl",["$scope",function(a){a.status={isOpen:!0}}]);